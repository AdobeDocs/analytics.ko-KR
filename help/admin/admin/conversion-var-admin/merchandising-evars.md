---
title: 머천다이징 eVar 및 제품 검색 방법
description: 머천다이징 eVar 이면의 개념과 데이터를 처리하고 할당하는 방법에 대해 자세히 알아보십시오.
feature: Admin Tools
exl-id: 9e1a39aa-451f-49bb-8e39-797b6bbd5499
source-git-commit: ac9e4934cee0178fb00e4201cc3444d333a74052
workflow-type: tm+mt
source-wordcount: '5289'
ht-degree: 99%

---

# 머천다이징 eVar 및 제품 검색 방법

이 상세한 설명서에서는 표준 eVar와 다르게 데이터를 처리하고 할당하는 머천다이징 eVar 이면의 개념을 설명합니다. 또한 머천다이징 eVar가 제품 검색 방법과 어떤 관련이 있는지도 설명합니다.

## 개요

머천다이징 eVar을 사용하면 *방문당/주문당* 수준이 아닌 *제품당* 수준에서 eVar가 캡처한 값에 성공적인 활동을 할당할 수 있습니다.

대부분의 소매 웹 사이트에는 제품을 찾는 여러 가지 방법이 있지만 Adobe는 다음을 모든 소매 고객이 Adobe Analytics에서 추적해야 하는 기본적인 제품 검색 방법으로 간주합니다.

* 내부 검색 키워드
* 내부 캠페인 추적 코드
* 머천다이징/범주 찾아보기
* 크로스셀링 링크

이 설명서를 위해 다음과 같이 몇 가지 eVar를 솔루션에 매핑해 보겠습니다.

* eVar2: 내부 검색 키워드
* eVar3: 내부 캠페인 추적 코드
* eVar4: 머천다이징/범주 찾아보기
* eVar5: 크로스셀링 링크

서로 관련하여 모든 제품 검색 방법의 성능을 측정하기 위해 추가 eVar를 사용할 수 있습니다. 위에서 설명한 검색 방법 외에도 eVar에는 외부 웹 사이트의 제품 세부 사항 페이지에 대한 링크와 같은 다른 검색 방법이 포함됩니다.

* eVar1: 제품 검색 방법

이러한 변수를 표준 eVar로 구성하지 말고 머천다이징 eVar로 구성해야 합니다.

이러한 변수를 설정하는 방법을 보여드리고자, 여기에 한 가지 예시를 제시했습니다. 이 예시에서는 방문자가 사이트에서 제품을 발견하기 위해 내부 키워드 검색에 &quot;샌들&quot;을 사용하기로 합니다. 키워드 검색 결과 페이지에서 최소한 두 개의 eVar에 데이터를 캡처해야 합니다.

* `eVar2`는 검색에 사용된 키워드(&quot;샌들&quot;)와 같습니다.
* `eVar1`은 사용된 제품 검색 방법(&quot;내부 키워드 검색&quot;)과 같습니다.

이 두 가지 변수를 이러한 각 값과 동등하도록 설정하면 방문자가 제품을 발견하기 위해 내부 키워드 검색어 &quot;샌들&quot;을 사용하고 있다는 사실을 알게 됩니다. 그와 동시에 이 방문자가 제품을 발견하고자 할 때 다른 제품 검색 방법을 사용하지 않고 있다는 사실(예: 방문자가 키워드 검색을 하는 바로 그 시점에는 제품 카테고리를 찾아보고 있지 않다는 사실)도 알 수 있게 됩니다. 제품당 할당이 올바르게 이루어지도록 하려면 이처럼 사용되지 않은 방법이 내부 키워드 검색을 통해 발견된 제품의 검색에 대해 크레딧을 받지 않아야 합니다. 따라서 다른 검색 방법과 연결되는 eVar을 자동으로 &quot;비검색 방법&quot; 값과 동일하게 설정하는 로직을 코드(예: AppMeasurement, AEP Web SDK 등)에 입력해야 합니다.

예를 들어 사용자가 &quot;샌들&quot;이라는 키워드를 사용하여 제품을 검색하는 경우 Analytics 코드의 로직은 내부 키워드 검색 결과 페이지에서 이 변수들을 다음과 동일하게 설정해야 합니다.

* eVar2=&quot;샌들&quot;: 키워드 &quot;샌들&quot;이 내부 키워드 검색에 사용되었음
* eVar1=&quot;내부 키워드 검색&quot;: &quot;내부 키워드 검색&quot; 검색 방법이 사용되었음
* eVar3=&quot;비내부 캠페인&quot;: 검색 결과 페이지에 액세스할 때 내부 캠페인이 사용되지 않았음
* eVar4=&quot;비찾아보기&quot;: 검색 결과 페이지에서 카테고리 찾아보기에 액세스하지 않았음
* eVar5=&quot;비크로스셀&quot;: 검색 결과 페이지에서 크로스셀 링크를 클릭하지 않았음

## 머천다이징 eVar 설정

다음은 머천다이징 eVar와 함께 사용할 수 있는 다양한 설정입니다. 다음의 스크린샷은 보고서 세트 관리자에서 찍은 것입니다. [!UICONTROL Analytics] > [!UICONTROL 관리] > [!UICONTROL 보고서 세트] > [!UICONTROL 설정 편집] > [!UICONTROL 전환] > [!UICONTROL 전환 변수] > [!UICONTROL 새로 추가] > [!UICONTROL 머천다이징 활성화]로 이동하여 액세스합니다.

![Merch eVar](assets/merch-evars1.png)

해당 설정에 대한 자세한 내용은 표 아래의 섹션을 참조하십시오.

| 설정 | 설명 |
|--- | --- |
| 이름 | 변수와 연결되어야 하는 이름 또는 보고 차원입니다. `eVar1`이 제품 검색 방법을 캡처해야 하는 경우 `eVar1`의 이름 필드는 &quot;제품 검색 방법&quot;으로 설정되어야 합니다. |
| 머천다이징 | 머천다이징 eVar 값을 캡처하는 데 사용될 구문 유형입니다. |
| 할당 | 성공적인 이벤트가 발생할 때 크레딧을 받아야 하는 머천다이징 eVar 값을 결정하는 데 도움이 됩니다. |
| 다음 시기 이후에 만료 | 기존 제품 및 머천다이징 eVar 바인딩이 더 이상 적용되지 않아야 하는 시기를 결정합니다. |
| 유형 | 머천다이징 eVar에서 수집되는 데이터의 유형입니다. |
| 머천다이징 바인딩 이벤트 | 제품이 머천다이징 eVar 값에 바인딩되어야 하는 시기를 결정하는 이벤트입니다. |
| 재설정 | 해당 시점에서 eVar에 대한 모든 백엔드 데이터를 재설정하는 트리거입니다. |
| 머천다이징 활성화 | eVar을 표준 eVar에서 머천다이징 eVar로 전환하기 위해 &quot;활성화됨&quot;으로 설정해야 하는 플래그입니다. |

### 머천다이징 활성화

&quot;머천다이징 활성화&quot; 설정이 &quot;활성화됨&quot;으로 설정되면 아래에 설명된 모든 설정이 보고서 세트 관리자에 나타납니다. &quot;머천다이징 활성화&quot; 설정이 &quot;비활성화됨&quot;으로 설정되면 표준 eVar 설정만 사용할 수 있습니다.

### 머천다이징

이 옵션은 표준 eVar에 사용할 수 없습니다. [!UICONTROL 머천다이징] 설정을 사용하여 머천다이징 eVar 값을 캡처하는 방법으로 [!UICONTROL 전환 변수 구문] 또는 [!UICONTROL 제품 구문]을 선택할 수 있습니다.

**[!UICONTROL 전환 변수 구문]**&#x200B;은 자체 변수에서 eVar 값을 설정함을 의미합니다. 예를 들어 전환 변수 구문을 사용할 때 &quot;내부 키워드 검색&quot;의 `eVar1` 값이 페이지 코드(또는 AppMeasurement 코드, AEP 웹 SDK 코드 등) 내에서 다음과 같이 설정됩니다.

`s.eVar1="internal keyword search";`

**[!UICONTROL 제품 구문]**&#x200B;을 사용하면 eVar가 Adobe Analytics 제품 변수 내에서만 설정됩니다. Analytics 제품 변수는 제품당 6개의 각기 다른 부분으로 나뉘어져 있습니다.

`s.products="[category];[name];[quantity];[revenue];[events];[eVars]"`

* [!UICONTROL 카테고리] 및 [!UICONTROL 이름] 해당 제품을 식별합니다.
* [!UICONTROL 수량] 및 [!UICONTROL 매출]은 제품 구매를 추적할 때 유용합니다.
* [!UICONTROL 이벤트]는 매출로 계산되지 않는 사용자 지정 증분 또는 통화 이벤트 값(예: 배송, 할인 등)을 기록하는 데 유용합니다.

제품 구문을 사용하도록 구성된 머천다이징 eVar는 제품 변수의 최종 부분 내에서 설정됩니다. 예를 들어 방문자가 제품 ID &quot;12345&quot;을 발견하기 위해 내부 키워드 검색을 사용한다고 가정해 봅시다. 이 예에서 eVar1을 설정하는 제품 구문 기반 방법은 다음과 같습니다.

`s.products=";12345;;;;eVar1=internal keyword search";`

제품 변수의 수량, 매출 및 이벤트 부분에 대해 여전히 세미콜론으로 구분된 자리 표시자가 있습니다.  이러한 자리 표시자가 없으면 내부 키워드 검색의 `eVar1` 설정이 완전히 무시됩니다.

### 할당

머천다이징 eVar에 대한 &quot;할당&quot;이라는 용어는 특히 전환 변수 구문을 사용하는 머천다이징 eVar에 대해서 오해의 소지가 있습니다. 모든 표준 eVar에는 고유한 개별 할당 설정이 있을 수 있습니다. 하지만 전환 변수 구문이 있는 머천다이징 eVar는 보고서 세트 관리자의 할당 설정이 표시하는 내용과 관계없이 &quot;가장 최근(마지막)&quot; 할당 설정만 사용합니다.

이 설정의 역할을 이해하면 eVar 할당과 머천다이징 eVar 바인딩 간의 차이를 이해할 수 있습니다. 머천다이징 eVar의 경우 &quot;머천다이징 eVar 바인딩&quot;이 이 &quot;할당&quot; 설정에 더 적합한 이름입니다.

#### 표준 eVar 할당 설정

이미지 요청에서 표준 구문을 사용하는 모든 eVar가 수집될 때마다 Adobe Analytics 처리 서버는 `post_evar` 열이라고 하는 다른 데이터베이스 열에 데이터를 삽입합니다. eVar는 대부분의 경우 현재 히트 이후 어느 시점에서 만료되는데 이러한 eVar가 지속되어야 하기 때문에 서버는 모든 후속 이미지 요청에서 이 `post_evar` 열을 설정합니다. 이는 해당 eVar에 전달된 마지막 값과 동일하게 설정됩니다. 표준 eVar의 경우, 성공 이벤트가 발생하면 Adobe Analytics에서는 일반 eVar 열 대신 `post_evar` 열을 사용하여 이 이벤트에 대한 크레딧을 받아야 하는 eVar 값을 결정합니다.

표준 eVar의 경우 할당 설정은 특정 기간 동안 수집된 첫 번째 또는 마지막 eVar 값을 `post_evar` 열에 삽입할지 여부를 결정합니다. 표준 eVar에 대한 할당 설정이 &quot;원래 값(첫 번째)&quot;과 같으면 방문자로부터 수집된 첫 번째 eVar 값이 모든 후속 이미지 요청에 대해 `post_evar` 열에 삽입됩니다. 이 작업은 eVar가 &quot;다음 시기 이후에 만료&quot; 설정에 따라 만료되기 전까지 이 방문자의 브라우저에서 전송되는 모든 향후 요청에 대해 계속됩니다.

표준 eVar의 할당 설정이 &quot;가장 최근(마지막)&quot;과 같은 경우 방문자에서 수집된 가장 최근 eVar 값이 모든 후속 이미지 요청에 대해 `post_evar` 열에 채워집니다. &quot;가장 최근(마지막)&quot; 할당은 이미지 요청에서 해당 eVar가 새 값으로 설정될 때마다 `post_evar` 값이 변경됨을 의미합니다. &quot;원래 값(첫 번째)&quot; 할당은 해당 eVar가 향후 이미지 요청에서 다른 값으로 설정될 수 있어도 `post_evar` 열이 히트 간에 변경되지 않음을 의미합니다.

#### 머천다이징 eVar 할당(바인딩) 설정

앞에서 언급했듯이 전환 변수 구문이 있는 모든 머천다이징 eVar에는 &quot;가장 최근(마지막)&quot; 할당만 있습니다. 따라서 머천다이징 eVar에 대한 할당 설정은 방문자가 사이트를 계속 사용할 때 post_evar 열에 어떤 값이 삽입되는지를 판별하지 않습니다. 오히려 이 설정은 제품에 바인딩되는 eVar 값과 이러한 제품이 그 바인딩된 eVar 값에 성공 이벤트를 다시 할당하는 방법을 결정합니다.

머천다이징 eVar의 할당(즉, 바인딩) 설정이 &quot;원래 값(첫 번째)&quot;과 동일하게 설정되면, 이전에 post_evar 열의 해당 &quot;사전 처리된&quot; eVar에 바인딩된 적 없고 post_evar 열과 함께 설정되는 모든 제품이 post_evar 열에 포함된 값에 바인딩됩니다.  eVar 값과 제품 간의 이 바인딩은 보고서 세트 설정의 &quot;다음 시기 이후에 만료&quot; 설정에 따라 eVar가 만료될 때까지 변경되지 않습니다.

이미 바인딩된 제품을 가장 최근에 설정한 eVar 값에 바인딩하는 기준을 이미지 요청이 만족할 때마다 &quot;원래 값(첫 번째)&quot; 설정은 Adobe Analytics 데이터 수집 서버가 이러한 추가적인 시도를 무시하도록 강제합니다. 할당 (바인딩) 설정이 &quot;가장 최근(마지막)&quot;과 동일한 머천다이징 eVar에 대해서는 반대 상황이 발생합니다. 머천다이징 eVar에 제품을 바인딩하는 기준을 이미지 요청이 만족할 때마다 eVar에 전달된 가장 최근 값 또는 `post_evar` 열에 (항상) 포함된 값에 제품이 자신을 바인딩(및 리바인딩)합니다.

앞에서 언급한 바와 같이, 머천다이징 eVar을 사용하면 성공 이벤트를 eVar 값에 방문/주문 단위로 할당하지 않고 제품 단위로 할당할 수 있습니다. 따라서 바인딩된 제품에 연결 성공 이벤트(예: 장바구니 추가 또는 구매)가 있을 때마다 성공 이벤트는 해당 시점에 제품이 바인딩된 제품 및 머천다이징 eVar 값 모두에 크레딧을 제공합니다.

### 다음 시기 이후에 만료

머천다이징 eVar의 만료 설정을 사용하여 다음을 선택할 수 있습니다.

* 제품/eVar 바인딩이 모두 만료되는 시기

* eVar가 이미지 요청에 전달된 후 post_evar 열이 더 이상 자동으로 채워지지 말아야 하는 시기

eVar 만료는 성공 이벤트가 기록되거나 특정 기간이 경과할 때 발생할 수 있습니다. Adobe Analytics에서는 eVar당 한 번에 하나의 만료 설정만 허용합니다.

제품 검색 방법의 경우, 머천다이징 eVar의 만료를 설정하는 모범 사례는 이를 다음과 같도록 설정하는 것입니다.

* 사이트에서 자동으로 장바구니에서 제품을 제거하기 전에 사이트의 장바구니에 제품이 보관하는 시간(예: 14일, 30일 등)
* 구매 이벤트가 발생하는 시간

두 설정 중 하나를 사용하면 방문자가 구매하는 모든 제품에 대해 주문/단위/매출 크레딧이 해당 시점에 제품이 바인딩된 머천다이징 eVar 값에 할당됩니다.

### 유형

eVar 유형 설정은 eVar에 삽입되는 데이터 유형을 결정합니다. 대부분의 경우 이 값은 &quot;텍스트&quot;와 같아야 합니다. 머천다이징 eVar에 &quot;카운터&quot;를 사용하는 경우는 거의 없습니다. 하지만 &quot;카운터&quot;를 사용하여 제품 별로 카운터 eVar 값에 성공을 할당할 수 있습니다.  &quot;카운터&quot; 유형을 사용하여 솔루션에 대한 내용은 본 문서에서 다루지 않습니다.

### 머천다이징 바인딩 이벤트

머천다이징 바인딩 이벤트 설정을 사용하여 제품이 머천다이징 eVar 값에 바인딩되는 조건을 지정할 수 있습니다. 이러한 조건은 특정 성공 이벤트 또는 eVar의 실행으로만 국한됩니다. 트래픽 변수(예: prop)를 실행해도 머천다이징 바인딩에는 영향을 주지 않습니다.

참고로 머천다이징 바인딩 이벤트 설정은 두 개 이상의 이벤트를 통해 제품을 eVar 값에 바인딩할 수 있습니다. 예:

* 제품 보기 이벤트를 통해
* 장바구니 추가 이벤트를 통해
* 구매 이벤트를 통해

기본값으로 이 설정은 제품과 동일한 이미지 요청에 다른 이벤트/eVar(머천다이징 또는 표준)가 포함될 때마다 제품을 머천다이징 eVar 값에 바인딩합니다.

### 재설정

재설정 설정을 사용하면 현재 Adobe Analytics 백엔드 데이터베이스에 `post_evar` 값이 있는 모든 방문자에 대한 모든 eVar 값을 즉시 &quot;만료&quot;할 수 있습니다. 또한 현재 제품/eVar 바인딩을 모두 제거합니다.

>[!IMPORTANT]
>Adobe는 재설정이 발생하는 시간부터 데이터가 완전히 &quot;깨끗한 슬레이트&quot;인 상태에서 eVar을 새롭게 다시 시작하려는 경우가 아니라면, 재설정 설정을 사용하지 않는 것이 좋습니다.

## 어떤 설정을 사용해야 합니까?

사용 가능한 여러 설정 조합 중에서 어떤 설정이 모범 사례인지 궁금하실 것입니다.

제품 ID 12345에 &quot;내부 키워드 검색&quot;을 바인딩하려는 경우에는 제품 변수가 다음과 같이 설정됩니다.

`s.products=";12345;;;;eVar1=internal keyword search";`

제품 ID 12345와 동시에 캡처되는 모든 성공 이벤트(장바구니 추가, 구매)는 제품 ID 12345와 eVar1 값 &quot;내부 키워드 검색&quot; 모두에 대해 크레딧이 부여됩니다. 다른 eVar1 값이 제품 ID 12345와 연결된 성공 이벤트에 대한 크레딧을 받는 유일한 방법은 나중에 eVar1이 (제품 ID 12345와 함께) 제품 변수 내에서 다른 값으로 설정되는 경우 입니다.

예:

```js
s.products=";12345;;;;eVar1=internal campaign";
```

이 변수 설정은 제품 ID 12345의 바인딩을 eVar1 값 &quot;내부 키워드 검색&quot;에서 eVar1 값 &quot;내부 캠페인&quot;으로 변경합니다. 또한 eVar가 &quot;가장 최근(마지막)&quot;의 제품 구문 및 할당(바인딩) 설정을 사용하도록 구성된 경우에 이러한 리바인딩 변경이 발생합니다. 그와 달리 할당(바인딩) 설정이 &quot;원래 값(첫 번째)&quot;으로 설정되었다면, eVar1을 제품 ID 12345와 함께 &quot;내부 캠페인&quot;과 동일하게 설정할 시에 제품 ID 12345가 eVar1 값 &quot;내부 캠페인&quot;에 리바인딩되지 않습니다. 그 대신 바인딩은 원래 바인딩된 값인 &quot;내부 키워드 검색&quot;에 대한 바인딩으로 유지됩니다.

### 제품 구문 사용의 어려움

신중하게 계획하지 않으면 제품 구문을 사용할 때 몇 가지 문제가 발생할 수 있습니다. 웹 사이트에서 여러 eVar을 사용하여 제품 검색 방법을 추적하는 경우를 예로 들어 보겠습니다. 여기에서 특정 검색 방법 eVar에 크레딧을 제공하기 위해서는(그리고 다른 검색 방법 eVar는 크레딧을 받지 않게 하기 위해서는) 각 개별 제품 검색 방법 eVar을 동시에 설정해야 합니다. 제품 구문은 이러한 시나리오에서 사용할 수 있지만, 배포할 결과 코드는 더 복잡합니다.

기존의 &quot;샌들&quot; 예시를 제품 구문이 사용되도록 응용했을 때(방문자가 &quot;샌들&quot;이라는 키워드 용어를 사용하여 ID가 &quot;sandal123&quot;인 제품을 발견했다고 가정할 경우), 결과 제품 변수는 다음과 같이 설정해야 합니다.

`s.products=";sandal123;;;;eVar2=sandals|eVar1=internal search|eVar3=non-internal campaign|eVar4=non-browse|eVar5=non-cross-sell";`

이 예에서 제품 변수의 구문은 길지만 표시된 각 eVar 값을 &quot;sandal123&quot;이라는 제품 ID에 바인딩합니다. 그때부터 &quot;sandal123&quot; 제품과 동시에 캡처되는 모든 성공 이벤트(예: 장바구니 추가, 구매)는 이 제품에 마지막으로 바인딩된 eVar 값에 대해 크레딧이 부여됩니다.  이 코드 샘플은 위의 eVar가 &quot;sandal123&quot; 제품에 바인딩된 후에 &quot;sandal123&quot; 제품의 1개 구매(가격 79.95달러)가 발생하는 경우를 보여 줍니다.

```js
s.products=";sandal123;1;79.95";
s.events="purchase";
```

다음의 값은 모두 1개의 주문, 1개의 단위 및 그에 귀속되는 매출 79.95달러를 갖게 됩니다.

* eVar2 값 &quot;샌들&quot;
* eVar1 값 &quot;내부 키워드 검색&quot;
* eVar3 값 &quot;비내부 캠페인&quot;
* eVar4 값 &quot;비찾아보기&quot;
* eVar5 값 &quot;비크로스셀&quot;

이는 문제될 부분이 없이 올바르게 귀속이 이루어진 경우입니다. 오히려 이 접근 방식의 주요 딜레마는 제품 검색 방법 eVar을 설정하는 방법과 시기를 결정하는 것입니다.

제품 구문을 사용하는 대부분의 경우 검색 방법이 실제로 사용된 페이지(예: 키워드 검색 결과 페이지, 찾아보기 페이지, 내부 캠페인 랜딩 페이지 등)가 아닌 제품 세부 사항 페이지에서 제품 검색 방법 eVar가 설정되어야 합니다. 방문자가 어느 정도 제품과 상호 작용할 때까지는 제품이 진정으로 &quot;발견&quot;되지 않았다고 가정하는 것이 합리적입니다. 따라서, 이러한 페이지에는 여러 제품이 (일반적으로) 표시되는 점을 고려할 때 이러한 eVar(제품 구문 사용)는 검색 방법 페이지에서 설정하지 않아야 합니다. 우리의 목표는 방문자가 실제 상호 작용한 제품에만 검색 방법 값을 바인딩하는 것입니다.

이외에도 방문자는 검색 방법 페이지를 보는 동안 개별 제품 세부 사항 페이지로 이동하는 링크를 클릭하거나 개별 제품을 검색 방법 페이지에서 바로 장바구니에 추가할 수 있습니다. &quot;샌들&quot; 검색 키워드 예시를 사용하자면, 방문자가 &quot;sandal123&quot; 제품을 키워드 검색 결과 페이지에서 바로 장바구니에 추가하는 경우에 장바구니 추가를 캡처하기 위한 코드(장바구니에 추가 버튼의 onClick 이벤트 등)는 장바구니 추가가 발생할 때 동적으로 생성되거나 페이지 코드 또는 태그 관리 시스템을 통해 직접 &quot;하드 코딩&quot;되어야 합니다.  둘 중 어느 방식이든 간에 이러한 경우에서 실행될 코드는 다음과 같습니다.

```js
s.linkTrackVars="products,events";
s.linkTrackEvents=s.events="scAdd";
s.products=";sandal123;;;;eVar2=sandals|eVar1=internal keyword search|eVar3=non-internal campaign|eVar4=non-browse|eVar5=non-cross-sell";
s.tl(true,"o","Cart Add")
```

이 코드는 위에 표시된 eVar 값을 &quot;sandal123&quot; 제품에 올바르게 바인딩합니다. 그러나 클릭 이벤트가 발생할 때 이러한 값을 적절히 설정하려면 개발자가 다음을 수행해야 합니다.

* 제품 검색 방법 eVar에 삽입해야 하는 값을 결정하는 서버측 로직을 검색 결과 페이지에 추가합니다.
* 구문 오류 없이 위에 표시된 전체 제품 변수를 어셈블합니다.

또한 방문자가 제품 세부 사항 페이지에 대한 링크를 클릭하여 제품을 &quot;발견&quot;하고자 하는 경우 개발자는 다음을 수행해야 합니다.

* 제품 검색 방법 세부 사항(위에 표시)을 검색 방법 페이지에서 제품 세부 사항 페이지로 전달합니다.
* 이전 페이지로부터 방금 전달된 항목들을 바탕으로 동일한 제품 변수 값을 다시 만듭니다.

### 제품 구문이 유용한 경우

제품 구문은 다음과 같은 경우에 유용합니다.

* 동일한 제품 ID를 사용하는 여러 제품이 동시에 상호 작용될 때
* 이러한 제품들에 바인딩될 eVar가 제품 ID당 각기 다른 값을 보유할 때

예를 들어 많은 의류 제품에는 크기, 색상, 스타일 및 기타 모든 속성을 지정하는 &quot;하위 SKU&quot;가 있습니다. 이러한 속성은 하나의 하위 제품을 동일한 상위 제품에 속하는 다른 제품과 구분합니다. 미디엄 크기의 파란색 티셔츠와 라지 크기의 빨간색 티셔츠를 구매하는 경우를 예시로 들어 보겠습니다. 두 셔츠 모두 &quot;tshirt123&quot;이라는 상위 제품 ID를 가지며 `eVar10`이 하위 SKU를 캡처하도록 구성되어 있다고 가정할 때, 구매 확인 페이지에 설정되는 변수는 다음과 같이 설정됩니다.

```js
s.events="purchase";
s.products=";tshirt123;1;20;;eVar10=tshirt123-m-blue,;tshirt123;1;20;;eVar10=tshirt123-l-red";
```

이 경우 `eVar10`(childSKU) 값인 &quot;tshirt123-m-blue&quot;와 &quot;tshirt123-l-red&quot; 모두가 제품 ID &quot;tshirt123&quot;의 각 해당 인스턴스의 구매에 대해 크레딧을 받습니다.

### &quot;가장 최근&quot; 할당 사용의 어려움

가장 최근 (마지막)&quot;의 할당(바인딩) 설정을 사용하면 추가적인 문제에 직면할 수 있습니다. 많은 웹 탐색 경험에서 방문자는 이미 본 적이 있거나 장바구니에 추가한 제품을 &quot;재발견&quot;합니다. 이러한 일은 일반적으로 후속 방문을 통해 또는 구매 완료를 결정하기 직전에 발생합니다. 한 방문자가 사이트를 방문하는 동안 &quot;샌들&quot;이라는 키워드 검색으로 &quot;sandal123&quot; 제품을 발견한다고 가정해 봅시다. 방문자는 키워드 검색 결과 페이지에서 제품을 바로 장바구니에 추가합니다. 장바구니 추가를 캡처하는 코드는 다음과 같이 설정됩니다.

```js
s.linkTrackVars="products,events";
s.linkTrackEvents=s.events="scAdd";
s.products=";sandal123;;;;eVar2=sandals|eVar1=internal keyword search|eVar3=non-internal campaign|eVar4=non-browse|eVar5=non-cross";
```

따라서 이 이미지 요청에 표시되는 각 eVar 값은 &quot;sandal123&quot; 제품에 바인딩됩니다.

이제 방문자가 이 방문 중에 제품을 구매하지 않고 3일 후 사이트를 재방문하며 이때 장바구니에 &quot;sandals123&quot; 제품이 여전히 남아 있다고 가정해 봅시다. 방문자는 구매하기 전에 제품에 대해 자세히 알고 싶어합니다. 하지만 방문자는 키워드 검색을 사용하여 제품을 발견하지 않고 사이트를 탐색합니다. 그리고 방문자는 제품을 &quot;다시 찾기&quot; 바로 전에 &quot;여성 > 신발 > 샌드보드&quot; 머천다이징 찾아보기 섹션에 도달합니다. 방문자가 &quot;sandal123&quot; 제품에 대한 제품 세부 사항 페이지를 &quot;재발견&quot;하게 될 때, 변수는 다음과 같이 설정됩니다(페이지 로드 시).

```js
s.events="prodView";
s.products=";sandal123;;;;eVar4=womens > shoes > sandals|eVar1=browse|eVar3=non-internal campaign|eVar2=non-search|eVar5=non-cross-sell";
```

&quot;가장 최근 (마지막)&quot;의 할당(바인딩) 설정을 사용하면 &quot;sandal123&quot; 제품이 원래 바인딩된 값과 완전히 다른 eVar 값에 리바인딩됩니다. 또한 방문자가 &quot;sandal123&quot; 구매를 완료하면, 원래 바운드된 값 대신 이러한 새로 바인딩된 eVar 값에 모든 구매 크레딧이 제공됩니다.

여기에서 드는 의문점은 어떤 eVar 값이 구매에 대한 크레딧을 받아야 하느냐는 것입니다. 우리는 방문자가 처음에 내부 키워드 검색을 통해 &quot;sandal123&quot; 제품을 발견했음을 유념해야 합니다. 방문자는 그 이후에 검색 결과 페이지에서 제품을 장바구니에 바로 추가했습니다. 따라서 eVar1 값 &quot;내부 키워드 검색&quot;(및 eVar2 값 &quot;샌들&quot;)이 구매에 대한 크레딧을 받아야 합니다. 하지만 할당(바인딩) 설정이 &quot;가장 최근(마지막)&quot;으로 설정된 상태였기 때문에 eVar1 값 &quot;찾아보기&quot;(및 eVar4 값 &quot;여성 > 신발 > 샌들&quot;)가 대신 구매 크레딧을 받습니다. 그 이유는 이 값이 방문자가 구매를 완료하기 전에 &quot;sandal123&quot;에 바인딩된 마지막 값이기 때문입니다.

이 문제에 대한 해결 방법은 머천다이징 eVar의 할당(바인딩) 설정을 &quot;가장 최근(마지막)&quot;에서 &quot;원래 값(첫 번째)&quot;으로 변경하는 것입니다. 이 방법을 사용하면 방문자가 제품을 &quot;재발견&quot;한 횟수에 관계없이, 구매가 발생할 때 &quot;sandal123&quot; 제품에 바인딩된 원래 eVar 값이 크레딧을 받게 됩니다.

방문자가 장바구니에 제품을 추가하지만 구매하지 않는 경우, eVar 만료를 통해 새 검색 방법 값을 제품에 바인딩할 수 있습니다. eVar 만료는 장바구니에서 제품이 자동으로 제거되기 전에 웹 사이트에서 제품을 장바구니에 보관할 수 있도록 허용하는 시간과 같아야 합니다.

### 전환 변수 구문 사용

&quot;제품 구문&quot;과 &quot;전환 변수 구문&quot;을 비교하는 주제로 다시 돌아가봅시다. Adobe는 제품 검색 방법 머천다이징 eVar을 수집하는 동시에 해당 값을 방문자가 발견한 제품에 바인딩하는 보다 쉬운 방법을 발견했습니다. 전환 변수 구문을 사용하면 클라이언트의 개발자가 담당하는 구현 작업이 줄어듭니다. 그럼에도 제품 구문 방법과 비교할 때 그와 같거나 그보다 나은 정보를 제공합니다. 개발자는 제공된 배포 지침을 단순히 따르기만 하면 되며, 나머지 코드는 Adobe AppMeasurement/AEP 웹 SDK 파일에 넣을 수 있습니다.

그 예로, 내부 키워드 검색 성능을 추적하기 위해 권장되는 솔루션을 살펴보겠습니다. 이 솔루션에 따르면 키워드 검색 결과 페이지에서 코드는 하나의 prop(예: prop4)과 다른 prop(예: prop5)을 통해 검색 키워드를 캡처합니다. 이러한 prop은 검색의 표시된 결과 수를 추적합니다. 검색 결과 페이지에서는 Adobe Analytics 이미지 요청이 생성될 때마다 개발자가 배포한 데이터 레이어 개체(또는 페이지 코드)를 사용하여 위의 변수(prop)를 채웠습니다.

AppMeasurement/AEP 웹 SDK 파일에 포함된 추가 로직은 동시에 설정해야 하는 나머지 변수들(머천다이징 eVar/차원)을 채울 수 있습니다.\
예를 들어 새 방문자가 &quot;샌들&quot;에 대해 키워드 검색을 수행하고 검색 결과 페이지에서 25개의 결과가 반환되는 경우 실행될 코드(페이지 코드 또는 데이터 레이어 캡처를 통해)는 다음과 같습니다.

```js
s.prop4="sandals";
s.prop5="25";
```

그런 다음 AppMeasurement/Analytics SDK 파일 내의 로직이 이 코드 조각을 다음으로 자동 변환할 수 있습니다.

```js
s.prop4="sandals";
s.prop5="25";
s.eVar2="sandals";
s.eVar1="internal keyword search";
s.eVar3="non-internal campaign";
s.eVar4="non-browse";
s.eVar5="non-cross sell";
```

즉, 개발자들이 페이지에서 페이지로 데이터를 전달하고 제품 변수에 삽입할 꽤 크고 까다로운 문자열을 생성하느라 애먹을 필요 없이 추적 솔루션의 일부분(prop에 삽입되는 항목)을 구현하고 나머지 구현은 Adobe 컨설팅 팀이 제공하는 사용자 지정 코드에 그대로 둘 수 있습니다.

앞에서 설명한 바와 같이, 전환 변수 구문을 사용하는 모든 머천다이징 eVar에는 &quot;가장 최근(마지막)&quot;이라는 할당 설정이 있습니다. eVar가 어떤 값과 동일하게 설정되고 나면 해당 값은 모든 후속 히트에서 지속됩니다(post_evar 열을 통해). 이 값은 다른 값으로 설정되거나 eVar가 만료될 때까지 지속됩니다. 따라서 eVar가 설정된 후 누구에 의해서든 상호 작용되는 모든 제품은 그 eVar에 아직 바인딩되지 않은 경우 eVar에 전달된 &quot;가장 최근 (마지막)&quot; 값에 바인딩됩니다.

위의 예에서 설명하자면 `eVar2` 값 &quot;샌들&quot;과 eVar1 값 &quot;내부 키워드 검색&quot; 등이 키워드 검색 발생 후에 보는 표시되는 페이지에서 지속됩니다. 이는 eVar가 다른 값으로 덮어쓰여질 때까지 지속됩니다. 방문자가 키워드 검색 결과 페이지에서 &quot;sandal123&quot; 제품 ID에 대한 제품 세부 사항 페이지의 링크를 클릭한다고 가정해 봅시다.  이때 &quot;sandal123&quot; 제품 ID(아직 바인딩되지 않은 경우)는 post_evar 열에 포함된 각 값 또는 이전(검색 결과) 페이지에서 수집된 eVar 값에 바인딩됩니다.

전환 변수 구문에 대해 재고해야 할 사항이 한 가지 더 있습니다. eVar 값을 제품에 바인딩하려면 바인딩 이벤트를 설정해야 합니다. Adobe Analytics 이미지 요청에서 제품(제품 변수 내)과 함께 머천다이징 eVar(자체 변수)를 설정하는 것만으로 eVar 값이 제품에 반드시 바인딩되지는 않습니다.  보고서 세트 관리자에서 설정된 머천다이징 바인딩 이벤트 설정이 eVar 값을 제품에 바인딩하는 기준을 결정합니다.

우리의 목표는 제품 상호 작용이 발생할 때(제품이 &quot;발견됨&quot;임을 의미)마다 제품 검색 방법 eVar 값을 제품에 바인딩하는 것이므로, 발생할 수 있는 가장 일반적인 &quot;제품 발견됨&quot; 상호 작용으로 제품 보기(방문자가 제품 세부 사항 페이지로 이동할 때) 또는 장바구니 추가(방문자가 제품 검색 방법 페이지에서 제품을 장바구니에 바로 추가할 때)를 가정하는 것이 안전합니다.

따라서 이러한 두 이벤트(prodView, scAdd)를 &quot;기본적인&quot; 머천다이징 바인딩 이벤트로 선택할 수 있습니다.
이러한 바인딩 이벤트 중 하나가 이미지 요청에 포함되어 있을 때는 어떤 일이 발생할까요? 이 동일한 요청(제품 변수 내)에 포함되어 있고 머천다이징 eVar에는 바인딩되어 있지 않은 모든 제품 ID가 머천다이징 eVar(post_evar 열)에 전달된 가장 최근 값에 바인딩됩니다. 할당(바인딩) 설정이 &quot;원래 값(처음)&quot;과 동일하게 설정되어 있다면 이 원래의 바인딩이 발생한 후 이러한 제품을 리바인딩하려는 시도가 무시됩니다.

### 모범 사례 설정

모범 사례 설정은 다음과 같습니다. 이 설정은 최상의 결과를 사용하여 제품 검색 방법을 쉽게 구현합니다. Adobe는 클라이언트가 각 제품 검색 방법 머천다이징 eVar(일반적으로)을 다음과 같이 구성할 것을 권장합니다.

* 머천다이징 활성화됨: 활성화됨
* 머천다이징 [구문]: 전환 변수 구문
* 할당 [바인딩]: 원래 값(첫 번째)
* 다음 시기 이후에 만료: 제품이 장바구니에서 자동으로 제거되기 전에 장바구니에 보관되는 시간(예: 14일, 30일 등).  이 시간이 설정되어 잇지 않으면 &quot;구매&quot; 이벤트 완료 후 만료됩니다.
* 유형: 텍스트
* 머천다이징 바인딩 이벤트: 제품 보기, 장바구니 추가 및 구매

## 바인딩 이벤트가 실제로 수행하는 작업

바인딩 이벤트가 제품 변수와 동일한 서버 호출에 포함된 경우, 이후 열의 머천다이징 eVar(전환 변수 구문 사용) 값이 제품 변수에 바인딩됩니다. 앞의 예를 기반으로, 하나의 서버 호출에 다음과 같은 머천다이징 eVar 값이 포함되어 있다고 가정해 봅시다.

```js
s.eVar2="sandals";
s.eVar1="internal keyword search";
s.eVar3="non-internal campaign";
s.eVar4="non-browse";
s.eVar5="non-cross sell";
```

앞에서 설명한 대로 위의 eVar는 각자의 해당 post_evar 열을 통해 현재 히트 이후에도 지속됩니다. 따라서 Adobe 서버가 위의 eVar을 다음과 같이 변환합니다.

```js
post_eVar2="sandals";
post_eVar1="internal keyword search";
post_eVar3="non-internal campaign";
post_eVar4="non-browse";
post_eVar5="non-cross sell";
```

이러한 이후 열은 Adobe의 데이터베이스에 저장되고 처음에 설정된 현재 히트 이후에도 유지됩니다. 이로써, 만료 또는 변수 재설정이 발생하지 않는다고 가정됩니다.  Adobe의 서버에서는 바인딩 이벤트와 제품 변수를 모두 포함하는 향후 서버 호출을 처리할 때 이러한 post_evar 값이 &quot;사용 가능&quot; 상태입니다.

발생하는 바인딩은 이러한 post_evar 값과 제품 변수의 콘텐츠 사이에만 적용됩니다. 바인딩 이벤트가 eVar 또는 제품 변수에 반드시 &quot;바인딩&quot;되지는 않습니다. Adobe 서버에 post_evar 값을 제품에 바인딩하도록 지시하는 &quot;촉매제&quot;와 같습니다.

향후 히트에서 다음의 변수가 설정된다고 가정해 봅시다.

```js
s.products=";sandals123"
s.events="prodView";
```

post_evar 열에서 Adobe 처리 서버는 이 히트를 다음과 같이 봅니다.

```js
s.products=";sandals123";
s.events="prodView";
post_eVar2="sandals";
post_eVar1="internal keyword search";
post_eVar3="non-internal campaign";
post_eVar4="non-browse";
post_eVar5="non-cross sell";
```

eVar1, eVar2, eVar3, eVar4 및 eVar5가 `prodView`를 바인딩 이벤트로 사용하도록 구성되어 있다고 가정해 봅시다. 이러한 eVar 중 어느 하나라도 prodView를 바인딩 이벤트로 사용하도록 구성되지 않은 경우 해당(잘못 구성된) eVar와 제품 변수 간의 바인딩이 발생하지 않습니다.

바인딩이 이루어지면 post_products 열의 값에서 볼 수 있는 매우 흥미로운 결과가 생성됩니다. 바인딩은 다음과 같이 위의 코드를 변환하고 몇 개의 이후 열을 설정합니다.

```js
post_events="prodView";
post_products=";sandals123;;;;eVar2=sandals|eVar1=internal keyword search|eVar3=non-internal campaign|eVar4=non-browse|eVar5=non-cross-sell";
```

post_products 열에 포함된 값이 익숙하실 수도 있습니다. 이 문서에서 위로 스크롤하여 이 post_products 값과 s.products 값을 비교해 보십시오.  post_products 열은 제품 변수 구문을 사용하여 설정된다는 점을 알 수 있습니다.

즉, 제품 구문을 통해 바인딩은 전환 변수 구문 eVar 값을 제품 변수로 &quot;복사&quot;합니다. 이 복사 작업은 제품 변수와 바인딩 이벤트(eVar 구성을 통해 설정)가 동일한 요청에 포함되어 있는 경우에만 수행됩니다. 이 시점에서 post_eVar 열에 포함된 값은 제품에 바인딩됩니다. 이 바인딩은 post_products 열에 저장된 제품 구문을 통해 표시됩니다.

## 머천다이징 eVar, 인스턴스 지표 및 Attribution IQ

Analytics 서버 호출에서 표준 eVar을 전송하면 post_evar 열의 값이 그 값에 귀속되는 인스턴스를 가져옵니다. 인스턴스는 eVar가 이미지 요청에서 특정 값과 동일하게 설정된 횟수를 나타냅니다.

예를 들어 `eVar10`이 [!UICONTROL 마지막 터치] 속성이 있는 표준 eVar라고 가정해 보겠습니다. 아무 페이지에서 `s.eVar10="hello world"`를 설정하면 Adobe가 히트를 처리할 때 &quot;hello world&quot;라는 값이 post_evar10 열로 전달됩니다. 인스턴스 지표는 `hello world`의 각 개별 `eVar10` 설정에 대해 &quot;1&quot;과 같습니다. post_evar 열에 값이 있는 경우 인스턴스가 항상 기록되는 것은 아니라는 점을 유념하십시오. 오히려 post_evar 열은 인스턴스가 기록될 때 어떤 값이 인스턴스를 가져오는지 결정합니다.

머천다이징 eVar의 인스턴스는 eVar가 수집하는 값에 속성을 제공합니다. 하지만 이는 머천다이징 eVar 값에 바인딩된 제품이 그와 동시에 &quot;상호 작용&quot; 또한 되었을 때만 발생합니다.

예를 들어 `s.eVar1="Internal Keyword Search"` 설정을 단독으로 설정해도 &quot;내부 키워드 검색&quot;의 eVar1 값에는 어떠한 인스턴스 지표 크레딧도 부여되지 않습니다. 이 시점에서 인스턴스 ID가 기록됩니다. 그러나 `eVar1`이 설정될 때 그와 동시에 제품이 그러한 &quot;내부 키워드 검색&quot; 값에 바인딩되는 경우가 아니라면 이 인스턴스는 지정되지 않음 버킷으로 귀속됩니다. 즉, &quot;내부 키워드 검색&quot;의 `eVar1` 값이 인스턴스를 가져올 수 있습니다. 하지만 이는 &quot;내부 키워드 검색&quot; 값에 바인딩된 제품이 동일한 이미지 요청의 제품 변수에 표시되는 경우에만 발생합니다.

요약하면 머천다이징 eVar에 대한 기본 인스턴스 지표는 추가 구성 없이는 유용하지 않습니다. 다행히도, Adobe은 [Attribution IQ](https://experienceleague.adobe.com/docs/analytics/analyze/analysis-workspace/attribution/overview.html)를 발표했습니다. 이를 사용해, Adobe Analytics에서 수집하는 모든 사용자 지정 지표에 대해 여러 속성 모델을 적용할 수 있습니다. 이러한 속성 모델을 적용하는 지표는 post_evar 열에 포함된 값이나 특정 제품에 바인딩된 값을 사용하지 않습니다. 대신 이 지표들은 이미지 요청 자체를 통해 전달되는 값(또는 Adobe Analytics 처리 규칙을 통해 캡처되는 값)만 사용합니다. Attribution IQ의 기능을 이용해, 전환 변수 구문을 사용하는 모든 머천다이징 eVar에 대해 정확하게 인스턴스 지표를 가져올 수 있습니다.

![속성 선택](assets/attribution-select.png)

머천다이징 eVar에 대한 인스턴스 지표를 보고서에 추가할 때 적절한 Attribution IQ 모델은 &quot;마지막 터치&quot; 모델입니다. 이 경우에는 모델에 대한 전환 확인 기간 설정이 중요하지 않습니다. &quot;강제&quot; 마지막 터치 속성 모델은 요청을 통해 전달되는 각 개별 값에 항상 인스턴스 크레딧을 제공하기 때문입니다. 이는 eVar의 실제 속성/바인딩 설정이 &quot;가장 최근(마지막)&quot;과 &quot;원래 값(첫 번째)&quot;으로 설정되는지의 여부와 관계없이 적용됩니다.
